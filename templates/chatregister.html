{% extends 'chatindex.html' %}
{% block body %}
    <h3>Register</h3>
    <form id="register-form" class="form-group">
        {% csrf_token %}
        <input name="username" id="id_username" type="text" class="validate">
        <label for="id_username" data-error="Username already taken">Username</label>
        <input name="password" id="id_password" type="password">
        <label for="id_password">Password</label>
        <input name="password2" id="id_password2" type="password">
        <label for="id_password2">Repeat Password</label>
         <button class="btn blue waves-effect waves-light pull-s12">Register</button>
    </form>
    <script>
    $(function () {
        $('#register-form').on('submit', function (event) {
            event.preventDefault();
            var username = $('#id_username').val();
            if(username !== '')
            {
                var password = $('#id_password').val();
                if(password !== '' && password === $('#id_password2').val()){
                    register(username, password);
                }
                else{
                    alert("The passwords doesn't match!");
                }
            }
            else
                alert("Please enter a valid username!");
        })
    })
    </script>
{% endblock %}